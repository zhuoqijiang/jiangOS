# JiangOS

## 简介
基于X86架构的操作系统，由汇编和C进行编写（代码量在3300行左右）

## 使用
- 安装 bochs
- 创建两个虚拟光盘(os.img ata.img)
- 执行脚本(sh makeimg.sh)
- 启动虚拟机bochs (bochs)

- 内存泄漏检测工具(valgrind)


## 工作流程
首先会加载booter, booter的目的为引导loader的加载, loader将系统由实模式转换为安全模式, 由16位转换为32位, 并加载gdt和idt, 之后对kernel可执行文件elf格式进行解析, 系统的控制权转换为kernel, kernel将gdt等进行重定向,初始化进程ldt表， 并初始化中断表，之后定义tss为上下文切换做准备，之后初始化内存分配，将内存以块和页的方式进行管理，之后初始化进程调度器，开启分页模式，初始化文件系统，最后开启super进程开始接受命令(相当于linux的shell进程)

## 功能

- 拥有泛型数据结构，如链表，栈，队列，堆等，提高代码的复用率 

- 拥有进程模块，包括进程管理，进程调度，进程通信，信号机制等，进程调度采用多级优先级队列的方式进行管理, 进程间通信以匿名文件的方式进行实现。

- 拥有内存管理, 使用buddy算法对物理内存空间进行管理，对系统所需小对象进行缓存，减少创建所需时间，对虚拟内存空间进行管理

- 拥有文件模块，采用扁平化的文件系统，实现对文件系统的基本操作如open，close，read，write，close等，采用一切皆文件的思想对设备操作进行抽象化，如控制台的输入输出等

- 拥有中断机制，采用上下文中断的方式，将操作分为上下文，减少下文中断处理时长，防止中断操作的阻塞无法即时响应其他中断

- 拥有异常机制和系统调用机制，对用户态和内核态进行切割，使系统更加安全
